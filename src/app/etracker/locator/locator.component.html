
        <div class="m-subheader-search">
            <h2 class="m-subheader-search__title">
              Locater
                <span class="m-subheader-search__desc">
                  Tracking System
                </span>
            </h2>

                <div class="m-grid m-grid--ver-desktop m-grid--desktop">
                    <div class="m-grid__item m-grid__item--middle">
                            <label for="">Select User</label>
                            <select name="" id="" (change)="selectUser($event)">
                              <option [selected]="user.userid == eTrackerUserService.currentUser.userid" *ngFor="let user of eTrackerUserService.allUsers; let i = index" [value]="user?.userid">{{user.userid}}</option>
                            </select>
                            <label for="">From</label>
                            <input type="date" (change)="filterFromDate($event)">
                            <label for="">To</label>
                            <input type="date" (change)="filterToDate($event)">
                            <input type="checkbox" (change)="showVisitedShops($event)">
                            <label for="">Show Visited Shops</label>
                            <button (click)="go($event)">Search</button>
                            <label for="">Set Zoom</label>
                            <select (change)="selectZoomLevel($event)">
                              <option *ngFor="let level of zoomLevels" [value]="level">{{level}}</option>
                            </select>
                    </div>
                    <div class="m-grid__item m-grid__item--middle">
                        <div class="m--margin-top-20 m--visible-tablet-and-mobile"></div>
                        <p *ngIf="eTrackerUserService?.showSpinner">loading...</p>
                        <img *ngIf="eTrackerUserService?.showSpinner" src="/assets/images/spinner.gif" />
                        
                       
                    </div>
          
          
                </div>

          </div>





<div class="m-portlet">
      <div class="m-portlet__body  m-portlet__body--no-padding">
            <agm-map *ngIf="eTrackerUserService.currentUser" [zoom]="selectedZoom" [usePanning]="true" [latitude]="eTrackerUserService.currentUser?.lat"
            [longitude]="eTrackerUserService.currentUser?.lng" (mapReady)=mapReady($event)>
          
            <agm-marker [latitude]="eTrackerUserService.currentUser?.lat" [longitude]="eTrackerUserService.currentUser?.lng" [iconUrl]="currentLocationMarker" [label]="{text: ''+eTrackerUserService.currentUser.userid}">
              <agm-snazzy-info-window [panOnOpen]="false" [maxHeight]="300" [maxWidth]="100" [padding]="0" [showCloseButton]="false"
                [placement]="right" [closeWhenOthersOpen]="false" >
                <ng-template>
                  <div class="marker-info">
                    <div class="info-header">
                      <h1>Description</h1>
                    </div>
                    <div class="info-body">
                      <p>Username: {{eTrackerUserService?.currentUser?.userid}}</p>
                      <p>Event</p>
                      <p>Time: {{getTime(eTrackerUserService?.currentUser?.timestamp.seconds)}}</p>
                      <p>Date: {{getDate(eTrackerUserService?.currentUser?.timestamp.seconds)}}</p>
                      <p>Customer</p>
                    </div>
                    <div class="info-footer">
                    </div>
                  </div>
                </ng-template>
              </agm-snazzy-info-window>
            </agm-marker>
          
            <agm-polyline *ngFor="let polyline of eTrackerUserService?.locationHistory;let i = index;" [strokeColor]="'red'" [geodesic]="true"
              [strokeOpacity]="0.7">
              <agm-polyline-point *ngFor="let point of eTrackerUserService?.locationHistory" [latitude]="point.lat" [longitude]="point.lng">
              </agm-polyline-point>
            </agm-polyline>
          
          
          
            <agm-marker *ngFor="let loc of eTrackerUserService.visitedShops" [latitude]="loc.lat" [longitude]="loc.lng" [iconUrl]="shopmarker">
              <agm-info-window>
                <strong>InfoWindow content</strong>
              </agm-info-window>
            </agm-marker>
          
          
          </agm-map>
      </div>


  </div>

