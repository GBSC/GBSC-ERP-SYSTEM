<div class="m-content">
    <div class="m-portlet">
        <div class="m-portlet__head">
            <div class="m-portlet__head-caption">
                <div class="m-portlet__head-title">
                    <h3 class="m-portlet__head-text">
                       Income Tax Rule
                    </h3>
                </div>
            </div>
        </div>
        <div class="m-portlet__body">
            <dx-data-grid id="gridContainer" 
            [dataSource]="incomeTax"  
            keyExpr="incomeTaxRuleId"
            (onSelectionChanged)="selectionChanged($event)"
            (onContentReady)="contentReady($event)"
            (onToolbarPreparing)="onToolbarPreparing($event)"
            [masterDetail]="{ enabled: true, template: 'detail' }"
            [columnAutoWidth]="true" 
             [showBorders]="true">
                
            <dxo-selection mode="single"></dxo-selection>
                <dxo-paging [pageSize]="5"></dxo-paging>
                <dxo-pager [showPageSizeSelector]="true" [allowedPageSizes]="[10, 20, 30]" [showInfo]="true">
                </dxo-pager>                
                <dxo-filter-row [visible]="true"></dxo-filter-row>
                <dxo-header-filter [visible]="true"></dxo-header-filter>
                <dxo-search-panel [visible]="true" [width]="240" placeholder="Search..."></dxo-search-panel>


                <dxi-column dataField="payrollYearId" caption="Payroll Year" [width]="300">
                    <dxo-lookup [dataSource]="payrollYears" displayExpr="name" valueExpr="payrollYearId">
                    </dxo-lookup>
                </dxi-column>
                <dxi-column dataField="personalExemption" [visible]="false"></dxi-column>
                <dxi-column dataField="exemptPercentage" [visible]="false"></dxi-column>
                <dxi-column dataField="taxLimit"></dxi-column>
                <dxi-column dataField="ageLimit"></dxi-column>
                <dxi-column dataField="taxRebatePercentage" [visible]="false"></dxi-column>
                <dxi-column dataField="taxRebateAmount" [visible]="false"></dxi-column>
                <dxi-column caption="Action" [minWidth]="70" cellTemplate="chartCellTemplate"></dxi-column>
                <div *dxTemplate="let i of 'chartCellTemplate'">
                  <div class="chart-cell">
                      <dx-button (click)="getDataById(i)" icon="edit"></dx-button>
                  </div>
              </div>

                <div *dxTemplate="let taxrule of 'detail'">
                      <!--begin::Portlet-->
                     <div class="m-section">
                     <div class="m-section__content">
								<div class="m-portlet"> 
                    <div class="m-portlet__body">
                      <ul class="nav nav-tabs  m-tabs-line" role="tablist">
                        <li class="nav-item m-tabs__item">
                          <a class="nav-link m-tabs__link active" data-toggle="tab" href="#m_tabs_6_1" role="tab">
                            Tax Schedule
                          </a>
                        </li> 
                        <li class="nav-item m-tabs__item">
                          <a class="nav-link m-tabs__link" data-toggle="tab" href="#m_tabs_6_2" role="tab">
                            Tax Relief
                          </a>
                        </li>
                      </ul>
                      <div class="tab-content">
                        <div class="tab-pane active" id="m_tabs_6_1" role="tabpanel">
                            
                            <dx-data-grid [dataSource]="taxrule.data.taxSchedules" [showBorders]="true">
                                <dxo-filter-row [visible]="true"></dxo-filter-row>
                                <dxo-header-filter [visible]="true"></dxo-header-filter>
                                <dxo-search-panel  [visible]="true" [width]="240" placeholder="Search..."></dxo-search-panel>
                                <dxo-paging [pageSize]="4"></dxo-paging>
                                <dxo-pager [showPageSizeSelector]="true" [allowedPageSizes]="[5, 10, 20]"[showInfo]="true"></dxo-pager>
                                <dxi-column caption="Salary Range">
                                <dxi-column dataField="from" caption="From"></dxi-column>
                                <dxi-column dataField="to" caption="Till"></dxi-column> 
                              </dxi-column>
                                <dxi-column dataField="taxType" caption="Tax Type"></dxi-column>
                                  <dxi-column dataField="value" caption="Value"></dxi-column> 
                                  <dxi-column dataField="fixedValue" caption="Fixed Value"></dxi-column> 
                                  <dxi-column dataField="applicabaleTo" caption="Applicabale To"></dxi-column>
                                </dx-data-grid> 
                        </div> 
                        <div class="tab-pane" id="m_tabs_6_2" role="tabpanel">
                             
                            <dx-data-grid [dataSource]="taxrule.data.taxReliefs" [showBorders]="true">
                                <dxo-filter-row [visible]="true"></dxo-filter-row>
                                <dxo-header-filter [visible]="true"></dxo-header-filter>
                                <dxo-search-panel  [visible]="true" [width]="240" placeholder="Search..."></dxo-search-panel>
                                <dxo-paging [pageSize]="4"></dxo-paging>
                                <dxo-pager [showPageSizeSelector]="true" [allowedPageSizes]="[5, 10, 20]"[showInfo]="true"></dxo-pager>
                                <dxi-column caption="Salary Range">
                                <dxi-column dataField="from" caption="From"></dxi-column>
                                <dxi-column dataField="to" caption="Till"></dxi-column>  
                                </dxi-column>
                                <dxi-column dataField="taxType" caption="Tax Type"></dxi-column>
                                <dxi-column dataField="value" caption="Value"></dxi-column> 
                                <dxi-column dataField="applicabaleTo" caption="Applicabale To"></dxi-column>
                                </dx-data-grid>
                               
                        </div>
                      </div>
                    </div>
                  </div>
                  </div>
                  </div>
                  <!--end::Portlet-->
                </div>
            </dx-data-grid>
        </div>
    </div>
    </div>